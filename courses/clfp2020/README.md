# Мова Common Lisp: вступ до функціонального програмування

У цьому курсі розглядаються основні принципи функціонального підходу
до програмування, його переваги та недоліки, а також елементи
математичного апарату, на якому він базується. В якості основного
інструменту використовуєтся мова програмування *Common Lisp*.

## Практика

### Лабораторна робота №1 - підготовка середовища розробки

Однією з традиційних особливостей мов програмування з сімейства *Lisp*
є те, що практично всі компоненти сучасного інтергрованого середовища
розробки програмного забезпечення (*IDE*) є "вбудованими" в
компілятор. Типове середовище *Lisp* - це інтерактивний інструмент під
назвою **REPL** (*Read-Eval-Print Loop*), що може читати, компілювати
та виконувати код, введений користувачем, автоматично переходячи в
режим дебагу при виникненні помилки. Багато сучасних мов
програмування, зокрема *Python*, використовують спрощені версії
подібних середовищ для екпериментів та прототипування, але дуже мало з
них можуть навіть наблизитись за функціональністю до *REPL*-середовищ
популярних компіляторів *Common Lisp*, в першу чергу через систему
обробки помилок, що передбачена стандартом мови.

Дана лабораторна робота полягає у налаштуванні середовища *Common
Lisp*, що складається з компілятора, текстового редактора та адаптера
для взаємодії між редактором та компілятором. Ми використовуватимемо
відкритий компілятор **SBCL**, який на даний момент є найращим
безкоштовним компілятором *Common Lisp*, текстовий редактор **Emacs**,
який вже кілька десятиліть є одним з найпопулярніших текстових
редакторів у світі, та плагін для *Emacs* під назвою **SLIME**, який і
є адаптером між текстовим редактором та компілятором.

#### Встановлення програмного забезпечення

Для встановлення *SBCL* та *Emacs* 26.2 на операційну систему *Linux*
необхідно виконати наступні команди (приклади наведено для
дистрибутиву Ubuntu):

``` bash
№# Додаткові пакети
sudo apt install git
# SBCL
sudo apt install sbcl
# Emacs
sudo apt-add-repository ppa:kelleyk/emacs
sudo apt update
sudo apt install emacs26
```

На *macOS* *Emacs* можна встановити, виконавши наступну команду:

``` bash
# SBCL
brew intall sbcl
# Emacs
brew cask install emacs
```

Для операційної системи *Windows* *SBCL* та *Emacs* можна завантажити
за посиланнями
http://prdownloads.sourceforge.net/sbcl/sbcl-2.0.0-x86-64-windows-binary.msi
та
https://ftp.gnu.org/gnu/emacs/windows/emacs-26/emacs-26.1-x86_64.zip
відповідно. Для запуску редактора необхідно виконати файл
`bin\runemacs.exe`. Зверніть увагу на те, що для налаштування адаптера
необхідно знати шлях, за яким було встановлено компілятор.

Після того, як втановлення *SBCL* та *Emacs* завершено, необхідно
встановити плагін *SLIME*. Це можна зробити самостійно відповідно до
[інструкцій](https://github.com/slime/slime), або скористатись файлом
`.emacs` у даній директорії, який необхідно розмістити у "домашній"
директорії на робочому комп'ютері (`/home/<username>/.emacs` на
*Linux*, `/Users/<username>/.emacs` на *macOS* та
`%HOMEPATH%\AppData\Roaming\.emacs` на *Windows*). У випадку з Windows
необхідно у цьому файлі замінити змінну `inferior-lisp-program` на
шлях, за яким було встановлено компілятор *SBCL*. Можна помітити, що
конфігурація та розширення (розробка плагінів) текстового редактора
*Emacs* здійснюється за допомогою діалекта *Lisp* під назвою *Emacs
Lisp* або *Elisp*.

При запуску *Emacs* встановить всі необхідні компоненти і відкриє файл
під назвою `*scratch*`, який є спеціальною "чернеткою" для нотаток та
налаштувань. Після цього можна потестувати налаштування середовища,
натиснувши комбінацію клавіш `Alt+x` для переходу в режим команд і
виконати команду `slime`, яка запустить компілятор *SBCL*, налаштує
адаптер та покаже рядок введення *REPL*:

``` cl
CL-USER>

```

У цьому вікні редактора можна безпосередньо вводити, редагувати,
компілювати та виконувати програмний код *Common Lisp*.

#### Docker

Всі описані вище кроки зібрані у вигляді рецепту Docker (файл
`Dockerfile` у даній директорії), тому за наявності налаштованого
середовища *Docker* можна просто зібрати *Docker*-образ та запустити
середовище *Common Lisp* у контейнері *Docker*:

``` bash
docker build -t lisp .
docker run -it --rm lisp emacs
```


## Ресурси

Для поглибленого вивчення матеріалу, що розглядається в даному курсі,
рекомендую наступні ресурси:

1. [*Common Lisp
   Hyperspec*](http://www.lispworks.com/documentation/HyperSpec/Front/index.htm) -
   (майже) повний текст стандарту *Common Lisp* у відкритому
   доступі. Пошук по даному ресурсу можна здійснювати безпосередньо з
   *Emacs* (при ввімкненому режимі *SLIME*), за допомогою комбінації
   клавіш `C-c h` - сторінка з сайту буде відображена безпосередньо в
   текстовому редакторі.

2. [*Structure and Interpretation of Computer
   Programs*](https://www.youtube.com/watch?v=2Op3QLzMgSY) -
   відеозапис курсу лекцій, прочитаного Гелом Абельсоном та Джеральдом
   Джеєм Сасманом в Массачусетському технологічному інституті 1986
   року. Курс використовує мінімалістичний та елегантний діалект
   *Lisp* під назвою *Scheme* і до цього часу вважається одним з
   найкращих курсів про основи побудови комп'ютерних програм. Курс
   супроводжується книгою тих же авторів, що знаходиться у [відкритому
   доступі](https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book.html).
